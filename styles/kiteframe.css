/* Canvas background variables for light/dark mode support */
:root {
  --kiteframe-canvas-bg: hsl(210, 40%, 98%);
}

.dark {
  --kiteframe-canvas-bg: hsl(224, 71%, 4%);
}

.kiteframe-canvas { position: relative; overflow: hidden; background: var(--kiteframe-canvas-bg); width:100%; height:100%; cursor: grab; }
.kiteframe-canvas.grabbing { cursor: grabbing; }
.kiteframe-world  { position: absolute; inset: 0; transform-origin: 0 0; width: 100vw; height: 100vh; overflow: visible; will-change: transform; -webkit-font-smoothing: antialiased; -moz-osx-font-smoothing: grayscale; backface-visibility: hidden; }
.kiteframe-node   { position: absolute; box-sizing: border-box; background: transparent; border-radius: 8px; cursor: grab; transition: box-shadow 0.2s ease; overflow: visible; }
/* Note: border and box-shadow are now handled inline in BasicNode.tsx for dynamic coloring */
.kiteframe-node.selected { 
  /* Enhanced selection styling is now in enhanced-selection.css */
}
.kiteframe-node.dragging { cursor: grabbing; z-index: 1000; transform: scale(1.02); }
.kiteframe-node .title { 
  font-size: 12px; 
  font-weight: 600; 
  padding: 8px 12px; 
  border-bottom: 1px solid hsl(214.3, 31.8%, 91.4%); 
  cursor: move; 
  background: hsl(210, 40%, 96%); 
  border-radius: 8px 8px 0 0;
  word-wrap: break-word;
  overflow-wrap: break-word;
  white-space: pre-wrap;
  line-height: 1.3;
}
.kiteframe-node .body { 
  padding: 12px; 
  font-size: 12px; 
  color: hsl(222.2, 84%, 4.9%); 
  min-height: 40px;
  word-wrap: break-word;
  overflow-wrap: break-word;
  white-space: pre-wrap;
  line-height: 1.4;
  max-height: 300px;
  overflow-y: auto;
}
.kiteframe-edge-layer { position:absolute; inset:0; pointer-events:none; z-index: 0; }
.kiteframe-select-rect { position:absolute; border:1px dashed hsl(221.2, 83.2%, 53.3%); background: hsla(221.2, 83.2%, 53.3%, 0.08); pointer-events:none; }
.kiteframe-hand { cursor: grab; }
.kiteframe-hand:active { cursor: grabbing; }

/* Disable text selection during canvas interactions */
.kiteframe-canvas {
  -webkit-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none;
}

/* Disable text selection on all node content */
.kiteframe-node,
.kiteframe-node *,
.kiteframe-node .title,
.kiteframe-node .body {
  -webkit-user-select: none !important;
  -moz-user-select: none !important;
  -ms-user-select: none !important;
  user-select: none !important;
  -webkit-touch-callout: none !important;
  -webkit-tap-highlight-color: transparent !important;
}

/* Edge animation for animated edges */
@keyframes dashflow {
  0% {
    stroke-dashoffset: 20;
  }
  100% {
    stroke-dashoffset: 0;
  }
}

.kiteframe-edge-animated {
  animation: dashflow 2s linear infinite;
}

/* Production Features Animations */
@keyframes pulse {
  0%, 100% {
    opacity: 1;
  }
  50% {
    opacity: 0.7;
  }
}

@keyframes slideInRight {
  from {
    transform: translateX(100%);
    opacity: 0;
  }
  to {
    transform: translateX(0);
    opacity: 1;
  }
}

@keyframes slideInDown {
  from {
    transform: translate(-50%, -100%);
    opacity: 0;
  }
  to {
    transform: translate(-50%, 0);
    opacity: 1;
  }
}

/* Radial Menu Animations */
@keyframes radialFadeIn {
  from {
    transform: scale(0.5);
    opacity: 0;
  }
  to {
    transform: scale(1);
    opacity: 1;
  }
}

@keyframes radialSectorPop {
  0% {
    transform: translate(-50%, -50%) scale(0);
    opacity: 0;
  }
  70% {
    transform: translate(-50%, -50%) scale(1.1);
  }
  100% {
    transform: translate(-50%, -50%) scale(1);
    opacity: 1;
  }
}

@keyframes radialSubmenuSlide {
  from {
    opacity: 0;
    transform: scale(0.8);
  }
  to {
    opacity: 1;
    transform: scale(1);
  }
}

.radial-menu-enter {
  animation: radialFadeIn 0.2s ease-out forwards;
}

.radial-sector-enter {
  animation: radialSectorPop 0.3s ease-out forwards;
}

.radial-submenu-enter {
  animation: radialSubmenuSlide 0.2s ease-out forwards;
}